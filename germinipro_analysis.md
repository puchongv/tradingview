### **ภาพรวมโปรเจกต์: ระบบพิสูจน์ทราบคุณภาพสัญญาณ (Signal Quality Verification System)**

### **1. หลักการและจุดประสงค์หลัก (The Core Principle)**

เรากำลังสร้างระบบเพื่อ **"พิสูจน์ความน่าเชื่อถือของรูปแบบที่เคยเกิดขึ้นในอดีต"** โดยมีเป้าหมายเพื่อค้นหา "ขอบแห่งความได้เปรียบทางสถิติ" (Statistical Edge) ที่สามารถทำซ้ำได้ เราจะทำการ **"เจาะลึก"** ลงไปในแต่ละ **"Bucket Time"** (`วัน` + `ชั่วโมง`) เพื่อค้นหา "ลายเซ็น" ของความสำเร็จหรือความล้มเหลวที่ชัดเจนและวัดผลได้

### **2. เทคนิคและ KPI ที่ใช้ในการวิเคราะห์ (The Techniques & KPIs)**

เพื่อ "พิสูจน์ทราบ" คุณภาพของสัญญาณ เราจะใช้ชุด KPI ทั้งหมด 6 ตัวในการประเมินแต่ละ Pattern (`Strategy | Action`) ภายในแต่ละ Bucket Time:

1.  **Total PNL (ผลกำไร/ขาดทุนสุทธิ):**
    *   **เทคนิค:** `(ชนะ * Payout) - (แพ้ * Investment)`
    *   **จุดประสงค์:** วัดผลลัพธ์สุดท้ายที่จับต้องได้ ว่า Pattern นี้ "ทำเงิน" หรือ "เผาเงิน"

2.  **Win Rate (ความแม่นยำ):**
    *   **เทคนิค:** `(ชนะ / เทรดทั้งหมด) * 100`
    *   **จุดประสงค์:** วัดความแม่นยำพื้นฐานของสัญญาณ

3.  **Total Trades (นัยสำคัญทางสถิติ):**
    *   **เทคนิค:** `COUNT(เทรดทั้งหมด)`
    *   **จุดประสงค์:** กรองสัญญาณรบกวน (Noise) และรับประกันว่าผลลัพธ์มาจากข้อมูลที่มากพอจะเชื่อถือได้

4.  **Consistency Score (ความสม่ำเสมอ):**
    *   **เทคนิค:** `Standard Deviation (Std Dev)` ของ Win Rate รายสัปดาห์
    *   **จุดประสงค์:** **(KPI ที่สำคัญที่สุด)** วัด "ความนิ่ง" ของผลงาน ค่า Std Dev **ต่ำ** หมายถึงมีความสม่ำเสมอสูงและน่าเชื่อถือ

5.  **Contribution % (สัดส่วนการมีส่วนร่วม):**
    *   **เทคนิค:** `(เทรดของ Pattern / เทรดทั้งหมดใน Bucket นั้น) * 100`
    *   **จุดประสงค์:** วัด "อิทธิพล" ของ Pattern นั้นๆ ต่อผลลัพธ์โดยรวมของ Bucket Time ช่วยให้รู้ว่าใครคือ "ผู้เล่นหลัก" ตัวจริง

6.  **Weeks Analyzed (จำนวนสัปดาห์ที่วิเคราะห์):**
    *   **เทคนิค:** `COUNT(DISTINCT สัปดาห์)`
    *   **จุดประสงค์:** เป็น KPI สนับสนุนสำหรับ `Consistency Score` เพื่อบอกว่าค่า Std Dev นั้นคำนวณมาจากข้อมูลที่ครอบคลุมระยะเวลายาวนานแค่ไหน

### **3. Solution ที่ใช้ในการ Verify Quality (The Verification Process)**

ในแต่ละ Bucket Time เราจะใช้ **"3 แกนหลักในการตรวจสอบ"** เพื่อประเมินคุณภาพของสัญญาณอย่างรอบด้าน:

1.  **แกนที่ 1: Performance (ประสิทธิภาพ)**
    *   **ตรวจสอบจาก:** `Total PNL` และ `Win Rate`
    *   **สัญญาณคุณภาพสูงต้อง:** มี PNL เป็นบวกและ Win Rate สูงอย่างมีนัยสำคัญ

2.  **แกนที่ 2: Stability (ความเสถียร)**
    *   **ตรวจสอบจาก:** `Consistency Score (Std Dev)` และ `Weeks Analyzed`
    *   **สัญญาณคุณภาพสูงต้อง:** มีค่า Std Dev **ต่ำ** และมาจากข้อมูลที่วิเคราะห์ข้ามหลายสัปดาห์

3.  **แกนที่ 3: Significance (นัยสำคัญ)**
    *   **ตรวจสอบจาก:** `Total Trades` และ `Contribution %`
    *   **สัญญาณคุณภาพสูงต้อง:** มีจำนวนเทรดมากพอ และควรจะเป็นผู้เล่นหลักที่มี `Contribution %` สูงใน Bucket นั้นๆ

### **4. เครื่องมือและการแสดงผล (Tools & Visualization)**

1.  **SQL Script:**
    *   เราจะใช้สคริปต์ **เวอร์ชัน 21 (The Final Source)** เป็นเครื่องมือหลักเพียงตัวเดียว
    *   **หน้าที่ของสคริปต์:** สร้าง **"ข้อมูลหลัก (Master Data)"** ชุดเดียวที่คำนวณ KPI ทั้ง 6 ตัวสำหรับ **ทุก Pattern** ใน **ทุก Bucket Time** ออกมาเป็นตารางขนาดใหญ่

2.  **Chart / Visualization:**
    *   **เครื่องมือหลัก:** เราจะนำ "Master Data" จากสคริปต์ ไปแสดงผลใน Metabase ด้วย Visualization แบบ **`Table`**
    *   **วิธีการวิเคราะห์:** เราจะใช้ **"Dashboard Filters"** ของ Metabase เป็นเครื่องมือหลักในการวิเคราะห์ ผู้ใช้จะสามารถกรองข้อมูลบนตารางนี้ได้อย่างอิสระ (เช่น "แสดงเฉพาะวันอาทิตย์", "แสดงเฉพาะ Strategy ที่มี PNL > 1000") เพื่อเจาะลึกและค้นหา Insight ด้วยตัวเอง
    *   **เครื่องมือเสริม:** ข้อมูลหลักชุดเดียวกันนี้ สามารถนำไปสร้าง Chart ประเภทอื่นได้ตามต้องการ เช่น **`Combo Chart`** เพื่อเปรียบเทียบ KPI ทั้งหมดของ Strategy ภายใน Bucket เดียว หรือ **`Bar Chart`** เพื่อจัดอันดับ PNL ของทุก Strategy ในภาพรวม

